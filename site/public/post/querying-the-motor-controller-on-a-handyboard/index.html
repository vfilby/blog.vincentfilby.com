<!doctype html>
<html class="no-js">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title>Vincent Filby&#39;s Log</title>
        <meta name="author">
        <meta name="description" content="The awesome b-log of John Doe.">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="generator" content="Hugo 0.18.1" />
        <link href="#ZgotmplZ" rel="alternate" type="application/rss+xml" title="Vincent Filby&#39;s Log" />
        <link href="#ZgotmplZ" rel="feed" type="application/rss+xml" title="Vincent Filby&#39;s Log" />
        <link href='//fonts.googleapis.com/css?family=Roboto:400,300,700|Noto+Serif:400,400italic,700,700italic' rel='stylesheet' type='text/css'>
        <link rel="stylesheet" href="#ZgotmplZ">
        <link rel="icon" href="#ZgotmplZ">
        <link rel="apple-touch-icon" href="#ZgotmplZ" />
        <link rel="stylesheet" href="#ZgotmplZ">
        <script src="#ZgotmplZ"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1/jquery.js"></script>

        
        <script src="/js/galleria-1.5.1.min.js"></script>
        <style>
            .galleria{ height: 432px; }
        </style>
        
        
        <style>
        .site-header h2 .logo {
        background: url(#ZgotmplZ) no-repeat 0 0;
        }
        @media (min--moz-device-pixel-ratio: 1.3), (-o-min-device-pixel-ratio: 2.6 / 2), (-webkit-min-device-pixel-ratio: 1.3), (min-device-pixel-ratio: 1.3), (min-resolution: 1.3dppx) {
          .site-header h2 .logo {
            background-image: url(#ZgotmplZ);
        }}
       .site-header {
         background: #2a373d url(#ZgotmplZ) no-repeat center center;
         z-index: -1;
        }
        </style>

    </head>
    <body>
        
        <header class="site-header">
          <div class="transparent-layer">
              <h2>Vincent Filby</h2>
          </div>
        </header>


<div class="container clearfix">
    <main role="main" class="content">
        <article class="post">
            <a class="btn home" href="/10.0.1.40:1313" title="">&laquo; </a>
            
<h1><a href="/10.0.1.40:1313/post/querying-the-motor-controller-on-a-handyboard/" title="Querying the motor controller on a handyboard">Querying the motor controller on a handyboard</a></h1>

<footer class="post-info"> <span class="post-meta"><time datetime="2005.08.04">2005.08.04</time>

    

</span>
</footer>

            

<p>I have written a small library to query the status of the motors and it can be
downloaded below.</p>

<h2 id="on-off-and-direction">On/Off and Direction</h2>

<p>There are many built in functions in interactive c to set the motor speed and
direction; however, once it has been set there is no built in functionality to
query the status of the motors. It is a relatively easy process to get the
status by looking at the motor controller status byte 0x0e. The status byte (8
bits) uses the top 4 bits to turn the motors on and off and the bottom 4 bits
to set direction. So by looking at the byte: <code>poke( 0x0e )</code> we can see what
motors are set and which direction they are turning. By some simple bit
shifting and masking you can easily determine the state of any given motor.</p>

<h2 id="getting-motor-speed">Getting Motor Speed</h2>

<p>Getting the motor speed requires using the data that controlles the Pulse
Width Modulation (PWM) algorithms on the Handyboard. The speeds for motors 0 -
3 are, respectively, 0x22, 0x23, 0x24 and 0x25. By grabbing the value stored
at that memory location you can get the speed the motor is set to. The built
in functions let you control the speed using a range of 0 - 100 (in both
forward and backward directions) but a stock Handyboard only gives 7
graduations of control. The 7 speeds are denoted by the 7 following bit
patterns:</p>

<ul>
<li>0b00000000</li>
<li>0b00010001</li>
<li>0b01001001</li>
<li>0b01010101</li>
<li>0b01010111</li>
<li>0b01110111</li>
<li>0b01111111</li>
<li>0b11111111</li>
</ul>

<p>These two functions make up the library that I wrote for querying the motor
controller. Feel free to use it, abuse it and give it to your friends.</p>

<script src="//gist.github.com/vfilby/835575.js"></script>

            <ul class="share-buttons">
    <li></li>
    <li>
        <a class="icon-facebook-squared" href="https://www.facebook.com/sharer/sharer.php?u=%2f10.0.1.40%3a1313%2fpost%2fquerying-the-motor-controller-on-a-handyboard%2f" onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;" title=""></a>
    </li>
    <li>
        <a class="icon-twitter" href="https://twitter.com/share?text=Querying%20the%20motor%20controller%20on%20a%20handyboard&amp;url=%2f10.0.1.40%3a1313%2fpost%2fquerying-the-motor-controller-on-a-handyboard%2f" onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;" title=""></a>
    </li>
    <li>
        <a class="icon-gplus" href="https://plus.google.com/share?url=%2f10.0.1.40%3a1313%2fpost%2fquerying-the-motor-controller-on-a-handyboard%2f" onclick="window.open(this.href, 'google-plus-share', 'width=490,height=530');return false;" title=""></a>
    </li>
    <li>
        <a class="icon-linkedin" href="https://www.linkedin.com/shareArticle?mini=true&url=%2f10.0.1.40%3a1313%2fpost%2fquerying-the-motor-controller-on-a-handyboard%2f&title=Querying%20the%20motor%20controller%20on%20a%20handyboard" onclick="window.open(this.href, 'linkedin-share', 'width=600,height=494');return false;" title=""></a>
    </li>
</ul>

        </article>
        <div class="comments">
            <h3></h3>
            
        </div>
    </main>
    <aside class="author">
  <img class="profile-image" src="#ZgotmplZ" alt="Vincent Filby" />
  <p class="name"> 
  <strong>Vincent Filby</strong></p>
  <p class="address">PNW</p>
  <p class="link"></p>
  <ul class="social">
    
<li><a href="//twitter.com/vfilby" class="icon-twitter" target="_blank" title="Twitter"></a></li>













<li><a href="//github.com/vfilby" class="icon-github" target="_blank" title="Github"></a></li>




<li><a href="/10.0.1.40:1313post/index.xml" class="icon-rss" target="_blank" title="RSS"></a></li>

  </ul>
  <br><br>
</aside>

</div>

<footer class="main-footer">
  <div class="container clearfix">
        <a class="icon-rss" href="#ZgotmplZ" title="RSS"></a>
        <p>&copy; 2017 &middot; Powered by <a href="http://gohugo.io">Hugo</a>.</p>
  </div>
</footer>

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.8.0/highlight.min.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
<script>window.jQuery || document.write('<script src="10.0.1.40:1313\/js\/vendor\/jquery-1.11.0.min.js"><\/script>')</script>
<script src="#ZgotmplZ"></script>




</body>
</html>

