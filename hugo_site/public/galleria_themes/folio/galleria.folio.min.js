/**
 * Galleria Folio Theme - v1.5.1 2016-12-08
 * https://galleria.io
 *
 * Copyright (c) 2010 - 2016 worse is better UG
 * LICENSE: 708bd73001a8ceeba4bba85f412c0fbb
 * https://galleria.io/license/
 *
 */

!function(a){Galleria.addTheme({name:"folio",version:"1.4.7a",author:"Galleria",css:"galleria.folio.min.css?v=1.5.1",defaults:{transition:"pulse",thumbCrop:"width",imageCrop:!1,carousel:!1,show:!1,easing:"galleriaOut",trueFullscreen:!1,_webkitCursor:!1,_animate:!0,_center:!1,_onClick:null},init:function(b){Galleria.requires(1.4,"This version of Folio theme requires Galleria version 1.4 or later"),this.addElement("preloader","loaded","close").append({container:"preloader",preloader:"loaded",stage:"close"});var c=this,d=this.$("stage"),e=this.$("thumbnails"),f=this.$("thumbnails-container"),g=this.$("images"),h=this.$("info"),i=this.$("loader"),j=this.$("target"),k=0,l=j.width(),m=b._center,n=0,o=0,p=window.location.hash.substr(2),q=function(b){c.$("info").css({left:c.finger?20:Math.max(20,a(window).width()/2-b/2+10)})},r=function(a){return Math.min.apply(window,a)},s=function(a){return Math.max.apply(window,a)},t=function(b,c){c=a.extend({speed:400,width:190,onbrick:function(){},onheight:function(){},delay:0,debug:!1},c),b=a(b);var d,g,h,i,j=b.children(),k=b.width(),l=Math.floor(k/c.width),o=[],p={float:"none",position:"absolute",display:Galleria.SAFARI?"inline-block":"block"};if(m){var k=f.width(),q=(k-(l*n-10))/2;e.css("left",l?q:0)}if(b.data("colCount")!==l&&(b.data("colCount",l),j.length)){for(d=0;d<l;d++)o[d]=0;b.css("position","relative"),j.css(p).each(function(b,e){for(e=a(e),d=l-1;d>-1;d--)o[d]===r(o)&&(g=d);h={top:o[g],left:c.width*g},"number"==typeof h.top&&"number"==typeof h.left&&(c.speed?window.setTimeout(function(a,b,c){return function(d){Galleria.utils.animate(a,c,{easing:"galleriaOut",duration:b.speed,complete:b.onbrick})}}(e,c,h),b*c.delay):(e.css(h),c.onbrick.call(e)),e.data("height")||e.data("height",e.outerHeight(!0)),o[g]+=e.data("height"))}),i=s(o),i<0||"number"==typeof i&&(c.speed?b.animate({height:s(o)},c.speed,c.onheight):(b.height(s(o)),c.onheight.call(b)))}};m&&this.$("container").addClass("center"),this.bind("fullscreen_enter",function(b){this.$("container").css("height","100%"),c.finger&&a.each(c._controls.slides,function(b,c){a(c.container).show()})}),this.bind("fullscreen_exit",function(b){this.getData().iframe&&(a(this._controls.getActive().container).find("iframe").remove(),this.$("container").removeClass("iframe")),Galleria.TOUCH||a(c._controls.getActive().container).hide(),c.finger&&a.each(c._controls.slides,function(b,c){a(c.container).hide()})}),this._fullscreen.beforeExit=function(a){h.hide(),Galleria.IE8&&Galleria.utils.animate(c.getActiveImage(),{opacity:0},{duration:200}),Galleria.utils.animate(d[0],{opacity:0},{duration:200,complete:function(){d.css({visibility:"hidden",opacity:1}),e.show(),Galleria.utils.animate(e[0],{opacity:1},{duration:200}),a()}})},this.bind("thumbnail",function(f){this.addElement("plus");var h=f.thumbTarget,i=this.$("plus").css({display:"block"}).insertAfter(h),l=a(h).parent().data("index",f.index);b.showInfo&&this.hasInfo(f.index)&&i.append("<span>"+this.getData(f.index).title+"</span>"),n=n||a(h).parent().outerWidth(!0),o=o||n-a(h).width(),a(h).css("opacity",0),l.off(b.thumbEventType),Galleria.IE?i.hide():i.css("opacity",0),Galleria.TOUCH?l.on("touchstart",function(){i.css("opacity",1)}).on("touchend",function(){i.hide()}):l.hover(function(){Galleria.IE?i.show():i.stop().css("opacity",1)},function(){Galleria.IE?i.hide():i.stop().animate({opacity:0},300)}),k++,this.$("loaded").css("width",k/this.getDataLength()*100+"%"),k===this.getDataLength()&&(this.$("preloader").fadeOut(100),e.data("colCount",null),t(e,{width:n,speed:b._animate?400:0,onbrick:function(){var f=this,h=a(f).find("img, .img");window.setTimeout(function(f){return function(){Galleria.utils.animate(f,{opacity:1},{duration:b.transition_speed,complete:function(){a(f).parent().css("background","#000")}}),f.parent().off("click:fast click").on("click:fast",function(){var f=a(this).data("index");return Galleria.IE<9&&a(this).find(".galleria-plus").hide(),a.isFunction(b._onClick)?void b._onClick.call(c,c.getData(f)):(d.css({visibility:"visible",opacity:0}),c.$("target").height(c.$("target").height()),c.finger&&g.css("opacity",0),void Galleria.utils.animate(e[0],{opacity:0},{duration:100,complete:function(){e.hide(),c.enterFullscreen(),Galleria.utils.animate(d[0],{opacity:1},{duration:200,complete:function(){c.finger&&(g.animate({opacity:1}),c.finger.moveTo(f)),c.finger&&c.finger.setPosition(-f*c.finger.width),c.show(f)}})}}))})}}(h),b._animate?100*h.parent().data("index"):0)},onheight:function(){j.height(e.height())}}))}),this.bind("loadstart",function(a){a.cached||i.show()}),this.bind("data",function(){k=0}),this.bind("loadfinish",function(c){c.galleriaData&&(i.hide(),this.finger||h.hide(),this.hasInfo()&&b.showInfo&&this.isFullscreen()&&!this.finger&&h.fadeIn(b.transition?b.transitionSpeed:0),q(a(c.imageTarget).width()),this.finger&&b.showInfo&&h.show())}),Galleria.TOUCH||b._webkitCursor||(this.addIdleState(this.get("image-nav-left"),{left:-100}),this.addIdleState(this.get("image-nav-right"),{right:-100}),this.addIdleState(this.get("info"),{opacity:0})),this.$("container").css({width:b.width,height:"auto"}),b._webkitCursor&&Galleria.WEBKIT&&!Galleria.TOUCH&&this.$("image-nav-right,image-nav-left").addClass("cur"),Galleria.TOUCH&&this.setOptions({transition:"fadeslide",initialTransition:!1}),this.$("close").on("click:fast",function(){c.exitFullscreen()}),Galleria.History&&p&&(d.css("visibility","visible"),e.css("opacity",0),this.$("preloader").hide(),this.enterFullscreen(function(){this.show(parseInt(p,10))}));var u=null,v=function(a){if(u=null,c.isFullscreen())return void(c.getActiveImage()&&q(c.getActiveImage().width));var b=f.width();b!==l&&(l=b,t(e,{width:n,delay:50,debug:!0,onheight:function(){j.height(e.height())}}))};a(window).resize(function(){u&&clearTimeout(u),u=setTimeout(v,200)}),v()}})}(jQuery);